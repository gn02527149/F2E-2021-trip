{"version":3,"sources":["Component/Common/TopNavigation/TopNavigation.js","Component/Common/Footer/Footer.js","controller/apiManager.js","assets/images/view/unsplash_5Lw1U5BIumE.png","Component/Common/Header/HeaderSearch.js","assets/images/icons/bx_bx-search-alt.png","Router/Homepage/Homepage.js","Router/Homepage/index.js","Router/SearchResult/index.js","Router/ViewDetail/index.js","Component/App.js","index.js"],"names":["TopNavigation","useHistory","useState","id","className","to","Footer","apiRoot","getAuthorizationHeader","GMTString","Date","toGMTString","ShaObj","jsSHA","setHMACKey","update","Authorization","getHMAC","requestAPI","path","param","fetch","qs","stringify","method","headers","then","response","a","ok","json","msg","Message","data","requesScenicSpot","city","ScenicSpotPath","HeaderSearch","history","searchKind","setSearchKind","searchCity","useEffect","value","onChange","e","target","onClick","push","src","alt","Homepage","sliderData","setSliderData","hotList","setHotList","console","log","navigator","geolocation","getCurrentPosition","coords","$top","$select","$spatialFilter","latitude","longitude","$filter","nearby","City","Address","substr","$orderby","$format","$skip","Math","floor","random","needRedirect","length","map","Picture","PictureUrl1","defaultCardPicture","Name","OpenTime","ID","SearchResult","ViewDetail","basename","process","isProd","App","exact","component","ReactDOM","render","document","getElementById"],"mappings":"oXAgCeA,EAzBO,WACJC,cAAhB,IACA,EAAwCC,oBAAS,GAAjD,6BAEA,OACE,qBAAKC,GAAG,iBAAR,SACE,sBAAKC,UAAU,kBAAf,UACE,sBAAKA,UAAU,UAAf,UACE,qBAAKA,UAAU,SACf,iDAEF,+BACE,cAAC,IAAD,CAAMA,UAAU,SAASC,GAAG,IAA5B,0BACA,cAAC,IAAD,CAAMD,UAAU,cAAcC,GAAG,IAAjC,sCAGA,cAAC,IAAD,CAAMD,UAAU,cAAcC,GAAG,IAAjC,+CCRKC,G,MAVA,WACb,OACE,qBAAKH,GAAG,SAAR,SACE,qBAAKC,UAAU,kBAAf,SACE,sBAAMA,UAAU,YAAhB,iE,gDCNFG,EAAU,qCAGVC,EAAyB,WAC7B,IAEIC,GAAY,IAAIC,MAAOC,cACvBC,EAAS,IAAIC,IAAM,QAAS,QAUhC,OATAD,EAAOE,WAHM,8BAGa,QAC1BF,EAAOG,OAAO,WAAaN,GAQpB,CAAEO,cALP,yGAFSJ,EAAOK,QAAQ,OAMxB,IACqC,SAAUR,IAG7CS,EAAa,WAA4B,IAA3BC,EAA0B,uDAAnB,GAAIC,EAAe,uDAAP,GACrC,OAAOC,MAAM,GAAD,OAAId,GAAJ,OApBE,OAoBF,OAAwBY,EAAxB,YAAgCG,IAAGC,UAAUH,IAAU,CACjEI,OAAQ,MACRC,QAASjB,MAERkB,KAJI,uCAIC,WAAOC,GAAP,SAAAC,EAAA,yDACCD,EAASE,GADV,gCAEqBF,EAASG,OAAOJ,MAAK,SAACK,GAAD,OAASA,EAAIC,WAFvD,oDAMGL,EAASG,QANZ,2CAJD,uDAYJJ,MAAK,SAACO,GAAD,OAAUA,MAKPC,EAAmB,SAACC,EAAMf,GACrC,IAAMgB,EAAiB,sBAEvB,OAGOlB,EAHFiB,EAGa,GAAD,OAAIC,EAAJ,YAAsBD,GAFnBC,EAE2BhB,IC/ClC,MAA0B,iDC4F1BiB,G,MAhFM,WACnB,IAAMC,EAAUrC,cAChB,EAAoCC,mBAAS,4BAA7C,mBAAOqC,EAAP,KAAmBC,EAAnB,KACA,EAAoCtC,qBAApC,mBAAOuC,EAAP,UAEAC,oBAAS,sBAAC,sBAAAd,EAAA,0FAMP,IAWH,OACE,qBAAKxB,UAAU,gBAAf,SACE,sBAAKA,UAAU,kBAAf,UACE,qBAAKA,UAAU,YAAf,SACE,mBAAGA,UAAU,SAAb,wCAIF,sBAAKA,UAAU,YAAf,UACE,yBACEA,UAAU,cACVuC,MAAOJ,EACPK,SAAU,SAACC,GAAD,OAAOL,EAAcK,EAAEC,OAAOH,QAH1C,UAKE,kDACA,8DACA,8DACA,8DACA,wDACA,2DAEF,yBACEvC,UAAU,cACVuC,MAAOF,EACPG,SAAU,SAACC,GAAD,OAAOL,EAAcK,EAAEC,OAAOH,QAH1C,UAKE,8DACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,0DACA,6DAEF,qBAAKvC,UAAU,gBAAgB2C,QA1DlB,WACnBT,EAAQU,KAAR,qCACgC1B,IAAGC,UAAU,CACzCgB,aACAE,kBAsDE,SACE,qBAAKQ,ICpFF,qgDDoFmBC,IAAI,uB,iBEGvBC,G,MA5EE,WACClD,cAAhB,IACA,EAAoCC,oBAAS,GAA7C,mBAAOkD,EAAP,KAAmBC,EAAnB,KACA,EAA8BnD,mBAAS,IAAvC,mBAAOoD,EAAP,KAAgBC,EAAhB,KAmCA,OAlCAC,QAAQC,IAAIH,GAEZZ,oBAAS,sBAAC,4BAAAd,EAAA,4DACJ,gBAAiB8B,WACnBA,UAAUC,YAAYC,mBAAtB,uCACE,iCAAAhC,EAAA,6DAASiC,EAAT,EAASA,OAAT,SAEuB3B,EAAiB,GAAI,CACxC4B,KAAM,EACNC,QAAS,gCACTC,eAAe,UAAD,OAAYH,EAAOI,SAAnB,YAA+BJ,EAAOK,UAAtC,UACdC,QAAS,gCANb,OAEQC,EAFR,OAQEZ,QAAQC,IAAI,YAAaW,GACzBA,EAAOC,KAAOD,EAAOC,OAAP,UAAeD,EAAOE,eAAtB,aAAe,EAAgBC,OAAO,EAAG,IACvDlB,EAAce,GAVhB,2CADF,4EAaE,sBAAAxC,EAAA,sDACEyB,GAAc,GADhB,4CAfI,SAsBcnB,EAAiB,GAAI,CACzCiC,QAAS,8BACTK,SAAU,eACVC,QAAS,OACTC,MAAOC,KAAKC,MAAM,GAAAD,KAAKE,SAA2B,GAClDf,KAAM,IA3BA,OAsBFR,EAtBE,OA6BRC,EAAWD,GA7BH,2CA8BP,IAGD,qCACE,cAAC,EAAD,IACCF,GAAc,cAAC,IAAD,CAAQA,WAAYA,EAAY0B,cAAY,IAC3D,qBAAK1E,UAAU,qCAAf,SACGkD,EAAQyB,OAAS,GAChB,sBAAK3E,UAAU,gBAAf,UACE,oBAAGA,UAAU,YAAb,UACE,4DACA,qHAAiB,uBAAjB,oGAEF,qBAAKA,UAAU,iBAAf,SACGkD,EAAQ0B,KAAI,SAAC/C,GAAD,OACX,sBACE7B,UAAU,OADZ,UAKE,qBAAK6C,IAAKhB,EAAKgD,QAAQC,aAAeC,IACtC,mBAAG/E,UAAU,QAAb,SAAsB6B,EAAKmD,OAC3B,qBAAKhF,UAAU,YAAf,SAEE,+BAAO6B,EAAKqC,SAAWrC,EAAKoC,SAE9B,qBAAKjE,UAAU,YAAf,SAEE,+BAAO6B,EAAKoD,eAXTpD,EAAKqD,mBC9DbnC,I,QCAAoC,E,OAAf,E,QCAeC,E,OAAf,ECYaC,EAAWC,mIAAYC,OAAS,iBAAmB,IAChEnC,QAAQC,IAAIgC,GAEZ,IAiBeG,EAjBH,WACV,OACE,mCACE,eAAC,IAAD,CAAQH,SAAUA,EAAlB,UAEE,cAAC,EAAD,IACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAOI,OAAK,EAAC1E,KAAK,IAAI2E,UAAW3C,IACjC,cAAC,IAAD,CAAOhC,KAAI,6BAAgC2E,UAAWP,IACtD,cAAC,IAAD,CAAOpE,KAAI,wBAA2B2E,UAAWN,OAEnD,cAAC,EAAD,UCxBRO,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.a4b253cc.chunk.js","sourcesContent":["import React, { useCallback, useState } from \"react\";\nimport { useHistory } from 'react-router-dom';\n\n\nimport \"./TopNavigation.scss\";\nimport { Link } from \"react-router-dom\";\n\nconst TopNavigation = () => {\n  const history = useHistory();\n  const [isMenuVisible, setMenuVisible] = useState(false);\n\n  return (\n    <div id=\"top-navigation\">\n      <div className=\"inner-container\">\n        <div className=\"logoBox\">\n          <div className=\"logo\"></div>\n          <p>Travel Taiwan</p>\n        </div>\n        <ul>\n          <Link className=\"select\" to=\"/\">首頁</Link>\n          <Link className=\"not-allowed\" to=\"/\">\n            景點導覽\n          </Link>\n          <Link className=\"not-allowed\" to=\"/\">\n            觀光活動\n          </Link>\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default TopNavigation;\n","import React from \"react\";\n\n\nimport \"./Footer.scss\";\n\nconst Footer = () => {\n  return (\n    <div id=\"footer\">\n      <div className=\"inner-container\">\n        <span className=\"copyright\">#The F2E 3rd Week01 Design_#Tracy | FE_#Ruby </span>\n      </div>\n    </div>\n  );\n};\n\nexport default Footer;\n","import jsSHA from \"jssha\";\nimport qs from \"querystring\";\n\nconst apiRoot = \"https://ptx.transportdata.tw/MOTC/\";\nconst VERSION = \"/v2\";\n\nconst getAuthorizationHeader = () => {\n  let AppID = \"7a376b59e20f4432ac089f1fa355b119\";\n  let AppKey = \"mPqGsiqokJLEiYoiFKP7eN2nWxw\";\n  let GMTString = new Date().toGMTString();\n  let ShaObj = new jsSHA(\"SHA-1\", \"TEXT\");\n  ShaObj.setHMACKey(AppKey, \"TEXT\");\n  ShaObj.update(\"x-date: \" + GMTString);\n  let HMAC = ShaObj.getHMAC(\"B64\");\n  let Authorization =\n    'hmac username=\"' +\n    AppID +\n    '\", algorithm=\"hmac-sha1\", headers=\"x-date\", signature=\"' +\n    HMAC +\n    '\"';\n  return { Authorization: Authorization, \"X-Date\": GMTString };\n};\n\nconst requestAPI = (path = \"\", param = {}) => {\n  return fetch(`${apiRoot}${VERSION}${path}?${qs.stringify(param)}`, {\n    method: \"GET\",\n    headers: getAuthorizationHeader(),\n  })\n    .then(async (response) => {\n      if (!response.ok) {\n        const errorMsg = await response.json().then((msg) => msg.Message);\n        // alert\n        throw errorMsg;\n      }\n      return response.json();\n    })\n    .then((data) => data);\n};\n\nexport default requestAPI;\n\nexport const requesScenicSpot = (city, param) => {\n  const ScenicSpotPath = \"/Tourism/ScenicSpot\";\n\n  if (!city) {\n    return requestAPI(ScenicSpotPath, param);\n  }\n  return requestAPI(`${ScenicSpotPath}/${city}`, param);\n};\n","export default __webpack_public_path__ + \"static/media/unsplash_5Lw1U5BIumE.5e889f92.png\";","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport qs from \"querystring\";\n\n// import RoomIcon from \"@mui/icons-material/Room\";\n// import SearchIcon from \"@mui/icons-material/Search\";\nimport searchIcon from \"../../../assets/images/icons/bx_bx-search-alt.png\";\n\nimport requestAPI, { requesScenicSpot } from \"../../../controller/apiManager\";\n\nimport \"./HeaderSearch.scss\";\n\nconst HeaderSearch = () => {\n  const history = useHistory();\n  const [searchKind, setSearchKind] = useState(\"探索景點\");\n  const [searchCity, setSearchCity] = useState();\n\n  useEffect(async () => {\n    // const data = await requesScenicSpot(\"Taipei\", {\n    //   $top: 8,\n    //   $filter: \"contains(Address, '中正區')\",\n    // });\n    // console.log(data);\n  }, []);\n\n  const handleSearch = () => {\n    history.push(\n      `/scenic-spot/search-result?${qs.stringify({\n        searchKind,\n        searchCity,\n      })}`\n    );\n  };\n\n  return (\n    <div className=\"header-search\">\n      <div className=\"inner-container\">\n        <div className=\"sloganBox\">\n          <p className=\"slogan\">\n            Welcome to Travel Taiwan\n          </p>\n        </div>\n        <div className=\"searchBox\">\n          <select\n            className=\"search-kind\"\n            value={searchKind}\n            onChange={(e) => setSearchKind(e.target.value)}\n          >\n            <option>類別</option>\n            <option>所有類別</option>\n            <option>自然風景</option>\n            <option>體育健身</option>\n            <option>遊憩類</option>\n            <option>古蹟類</option>\n          </select>\n          <select\n            className=\"search-city\"\n            value={searchCity}\n            onChange={(e) => setSearchKind(e.target.value)}\n          >\n            <option>所有縣市</option>\n            <option>台 北 市</option>\n            <option>新 北 市</option>\n            <option>桃 園 市</option>\n            <option>台 中 市</option>\n            <option>台 南 市</option>\n            <option>高 雄 市</option>\n            <option>基 隆 市</option>\n            <option>新 竹 市</option>\n            <option>新 竹 縣</option>\n            <option>苗 栗 縣</option>\n            <option>彰 化 縣</option>\n            <option>南 投 縣</option>\n            <option>雲 林 縣</option>\n            <option>嘉 義 縣</option>\n            <option>嘉 義 市</option>\n            <option>屏 東 縣</option>\n            <option>宜 蘭 縣</option>\n            <option>花 蓮 縣</option>\n            <option>金 門 縣</option>\n            <option>澎 湖 縣</option>\n            <option>連 江 縣</option>\n          </select>\n          <div className=\"search-button\" onClick={handleSearch}>\n            <img src={searchIcon} alt=\"search\"></img>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default HeaderSearch;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQFSURBVHgB1ZlLaBNbGMf/Z5qYFHOviXBbeq/Yx6LCvdf2ohfswohVRLqoDwRFMIILu1Jwb6EtqAt1oagbEVxUFETwtfCN0m4qKDT1gQ9saxTFCia1LUlt7Xj+p5lxjH3MTLSMPwg5M+ck85/vfN93vpkjkEOw9cpy4fet1cfEOkAvwwwigE5diE5kRloy2+p6c/rGCZ88H04HQk3yxC54AF3DocK0ryW1rTbFYyWUIocDods68B88BC0cGPbVUqzGE7Sk10QSakoXjjaxLYInr5Qh4OuBl/k8Wqsh6G+CxxEFBes0Xdc9N+W56NDWasKDvvk9epmGXwQf8iBaFMHW8hJEi+eidHZQnUuNjKIrOYDLr9/LTx9eDmXwIxDB0zd0OIQCGxdWYJn8no4jzxLY19Ujb2AE+eBYaOO/FdgtRVpp60siMZhW7Tmz/KiK/GZamNCqq2/dy8u6joTmijz6NIG9D7rVdOdCax+v+ccUnK9Y20J5wSdrlqo2hW1qiytLbin/E7GKEmXFsN8n/XMQ8dRHdQMUdWBRJXYsmK9+x/Grb92HG2wLpUjDOkuudihBZ6PVqJ/3x4TjKXJje1wFlnVcQ8djtPa8gVNspSdOoyGytfutEkn2PHwx4bQTjr++YrG0sh/b7z4yx22R1neDLaHWP98rxRlQMP2O01xy7g4Kz9xUU2v44ZxZPunT5ej/NIpT3eNWtN70DxdaLf2P0Mdyg4Fi9zz8GlAc09DxyOyPSR8mzKsG0aK5cIqthF8VHhf6MpuCpoNi+SmdXaiOOf3x1IDZ78aiea1MU+E2uifD1tRPFjBOqA6HzHa/i/+zJZQphqyZVwS3LIz8brbjyQE4xZbQ9ndJ9c0ojtpY3ycils0czADtfUk4xZZQFhbG9B9ctABO4eplFDCXLNHvBFtCaYVjTxKqXRUJYf/iStiFEd6YrQ94s9Y87ATbhTOtauTQnZXz1bI4XZqp/6sIHXU15rjLr97//KKE8ILXVv7/TUXU1vdBLasPZIDQYuxjQqdPTlSvcjFo7XkLpziuRymE5dsym0FF8bRkzLIMuxFb4NuwtdnJD5gDT8mLJKQ1S0NBFAcDmEzgieev0SALEmO8UUHVyzSXGEqjKzVo+7quHkWs0MKsRY1ltj/7zNSVdQUrXPeP1/xtHjuxbN5CneJW7Iw/LrNoZvFswCdYO/y0omQqjAo/Whz5piScihmferf8Mm9KpFDRC48jp7xTvs0buwiPI+R7fU2MiQvwPCMtWia26o6ui8PwKAL64czmul4VTMOfCprpB/AYUqTcbBhqZns86uWuw7DcffCSZWlJKVLuiKz/un1jJXhGbj7otLConvm30aJXYOyi/llcoEtae74A3m/MlkccdegAAAAASUVORK5CYII=\"","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from 'react-router-dom';\n\nimport defaultCardPicture from \"../../assets/images/view/unsplash_5Lw1U5BIumE.png\";\n\nimport { HeaderSearch } from \"../../Component/Common/Header\";\nimport { Slider } from \"../../Component/Common/Slider\";\nimport requestAPI, { requesScenicSpot } from \"../../controller/apiManager\";\n\nimport \"./Homepage.scss\";\n\nconst Homepage = () => {\n  const history = useHistory();\n  const [sliderData, setSliderData] = useState(false);\n  const [hotList, setHotList] = useState([]);\n  console.log(hotList)\n\n  useEffect(async () => {\n    if (\"geolocation\" in navigator) {\n      navigator.geolocation.getCurrentPosition(\n        async ({ coords }) => {\n          // console.log(coords, coords.longitude, coords.latitude);\n          const nearby = await requesScenicSpot(\"\", {\n            $top: 6,\n            $select: \"ID,City,Name,Picture,Position\",\n            $spatialFilter: `nearby(${coords.latitude},${coords.longitude},5000)`,\n            $filter: \"Picture/PictureUrl1 ne null\",\n          });\n          console.log(\"nearby me\", nearby);\n          nearby.City = nearby.City || nearby.Address?.substr(0, 3);\n          setSliderData(nearby);\n        },\n        async () => {\n          setSliderData(false);\n        }\n      );\n    }\n\n    /* 取得該縣市其他景點資訊 */\n    const hotList = await requesScenicSpot(\"\", {\n      $filter: \"Picture/PictureUrl1 ne null\",\n      $orderby: \"Keyword desc\",\n      $format: \"JSON\",\n      $skip: Math.floor(Math.random() * (100 - 4 + 1) + 4),\n      $top: 4,\n    });\n    setHotList(hotList);\n  }, []);\n\n  return (\n    <>\n      <HeaderSearch />\n      {sliderData && <Slider sliderData={sliderData} needRedirect />}\n      <div className=\"homepage-container inner-container\">\n        {hotList.length > 0 && (\n          <div className=\"hot-container\">\n            <p className=\"title hot\">\n              <span>熱門景點</span>\n              <p>台灣的各個美景，都美不勝收。<br/> 等你一同來發現這座寶島的奧妙！</p>\n            </p>\n            <div className=\"card-container\">\n              {hotList.map((data) => (\n                <div\n                  className=\"card\"\n                  key={data.ID}\n                  // onClick={() => history.push(`/scenic-spot/view/${data.ID}`)}\n                >\n                  <img src={data.Picture.PictureUrl1 || defaultCardPicture} />\n                  <p className=\"title\">{data.Name}</p>\n                  <div className=\"city-info\">\n                    {/* <LocationOnOutlinedIcon className=\"icon\" /> */}\n                    <span>{data.Address || data.City}</span>\n                  </div>\n                  <div className=\"open-time\">\n                    {/* <LocationOnOutlinedIcon className=\"icon\" /> */}\n                    <span>{data.OpenTime}</span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default Homepage;\n","import Homepage from \"./Homepage\";\n\nexport default Homepage;\n","import SearchResult from \"./SearchResult\";\n\nexport default SearchResult;\n","import ViewDetail from \"./ViewDetail\";\n\nexport default ViewDetail;\n","import React, { useLayoutEffect } from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n\nimport \"../assets/normalize.css\";\nimport './style.scss';\n\nimport { TopNavigation } from \"./Common/TopNavigation\";\nimport { Footer } from \"./Common/Footer\";\nimport { requesScenicSpot } from \"../controller/apiManager\";\nimport Homepage from \"../Router/Homepage/index\";\nimport SearchResult from \"../Router/SearchResult/index\";\nimport ViewDetail from \"../Router/ViewDetail/index\";\n// import ScrollToTop from \"./ScrollToTop\";\n\nexport const basename = process.env.isProd ? \"/F2E-2021_trip\" : \"/\";\nconsole.log(basename);\n\nconst App = () => {\n  return (\n    <>\n      <Router basename={basename}>\n        {/* <ScrollToTop /> */}\n        <TopNavigation />\n        <Switch>\n          <Route exact path=\"/\" component={Homepage} />\n          <Route path={`/:searchKind/search-result`} component={SearchResult} />\n          <Route path={`/:searchKind/view/:id`} component={ViewDetail} />\n        </Switch>\n        <Footer />\n      </Router>\n    </>\n  );\n};\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './Component/App';\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}